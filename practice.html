<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶™‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶∏ ‡¶≤‡ßç‡¶Ø‡¶æ‡¶¨ | IELTS Compass</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Hind+Siliguri:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Calculator & Target Styles */
        .calculator-container {
            max-width: 900px;
            margin: 40px auto;
            border: 2px solid var(--primary);
            background: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }
        .target-box {
            background: #f0f7ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            text-align: center;
            border: 1px solid #bfdbfe;
        }
        .target-box select {
            padding: 10px;
            font-size: 1.1rem;
            border-radius: 8px;
            border: 2px solid var(--primary);
            font-family: 'Inter', sans-serif;
            font-weight: 600;
        }
        .calc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .calc-input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .calc-input-group label { font-weight: 700; color: var(--dark); }
        .calc-input-group input {
            padding: 12px;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            font-size: 1.1rem;
            text-align: center;
        }
        #band-result-box {
            display: none;
            margin-top: 30px;
            padding: 25px;
            background: #f8fafc;
            border-radius: 12px;
            border: 2px dashed var(--primary);
            text-align: center;
            animation: fadeIn 0.5s ease;
        }
        
        /* NEW FEATURE: Red Vibe Style */
        .vibe-red {
            background-color: #fff1f2 !important;
            border-color: #e11d48 !important;
            color: #9f1239 !important;
        }
        .vibe-red h1, .vibe-red h3 { color: #be123c !important; }
        .vibe-red .score-circle { border: 1px solid #fecdd3; }

        .score-comparison {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin-bottom: 20px;
        }
        .score-circle {
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            min-width: 120px;
        }

        /* NEW FEATURE: History Styles */
        .history-section {
            margin-top: 35px;
            padding-top: 25px;
            border-top: 1px solid #e2e8f0;
            display: none;
        }
        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        .history-table th, .history-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #f1f5f9;
        }
        .history-table th { font-size: 0.85rem; color: #64748b; background: #f8fafc; }
        .status-tag {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: bold;
        }
        .status-success { background: #dcfce7; color: #15803d; }
        .status-trying { background: #fef3c7; color: #b45309; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Status Colors */
        .status-average { background: #ffedd5; color: #9a3412; } /* Orange-ish for 5-5.5 */
        .status-worst { background: #450a0a; color: #ffffff; }    /* Dark Red/Black for below 5 */

        /* Motivation Card Style */
        .motivation-card {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            background: #f8fafc;
            border-left: 5px solid var(--primary);
            text-align: left;
            display: none;
        }
    </style>
</head>
<body>

   
<nav class="navbar">
    <div class="logo">IELTS<span>Compass</span></div>
    
    <div class="hamburger" id="hamburger">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
    </div>

    <ul class="nav-links" id="nav-menu">
        <li><a href="index.html" class="active">‡¶π‡ßã‡¶Æ (Home)</a></li>
        <li><a href="resources.html">‡¶∞‡¶ø‡¶∏‡ßã‡¶∞‡ßç‡¶∏ (Resources)</a></li>
        <li><a href="practice.html">‡¶™‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶∏ (Practice)</a></li>
        <li><a href="mock-test.html">‡¶Æ‡¶ï ‡¶ü‡ßá‡¶∏‡ßç‡¶ü (Mock Test)</a></li>
    </ul>
</nav>

    <header class="page-header">
        <h1>‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶™‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶∏ ‡¶≤‡ßç‡¶Ø‡¶æ‡¶¨ (Daily Practice Lab)</h1>
        <p>IELTS ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶ï‡ßç‡¶∞‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∏‡¶æ‡¶∞‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
    </header>

    <section class="resource-section reveal">
        <div class="feature-card" style="max-width: 900px; margin: 0 auto; text-align: center;">
            <div class="progress-info">
                <h3 id="status-heading">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ (Your Journey Today)</h3>
                <p id="status-subtext">‡¶≤‡¶ø‡¶∏‡¶®‡¶ø‡¶Ç ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
            </div>
            <div class="progress-bar-container" style="background: #e2e8f0; height: 12px; border-radius: 10px; margin: 20px 0; overflow: hidden;">
                <div id="exam-progress" style="width: 5%; height: 100%; background: var(--primary); transition: 1s cubic-bezier(0.4, 0, 0.2, 1);"></div>
            </div>
            <div class="step-labels" style="display: flex; justify-content: space-between; font-size: 12px; font-weight: bold; color: #64748b;">
                <span>LISTENING</span>
                <span>READING</span>
                <span>WRITING</span>
                <span>SPEAKING</span>
            </div>
        </div>
    </section>

    <section class="resource-section">
        <div class="resource-grid" id="practice-grid">
            <div class="resource-card reveal" id="module-listening">
                <div class="icon" style="font-size: 40px;">üéß</div>
                <div class="res-tag">‡¶ß‡¶æ‡¶™ ‡ß¶‡ßß</div>
                <h3>Listening Lab</h3>
                <p>‡¶Ö‡¶°‡¶ø‡¶ì ‡¶∂‡ßÅ‡¶®‡ßá ‡¶∂‡ßÇ‡¶®‡ßç‡¶Ø‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶∏‡ßç‡¶™‡ßá‡¶≤‡¶ø‡¶Ç-‡¶è ‡¶∏‡¶§‡¶∞‡ßç‡¶ï ‡¶•‡¶æ‡¶ï‡ßÅ‡¶®‡•§</p>
                <div class="bangla-instruction">üí° <strong>‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶®‡¶æ:</strong> ‡¶π‡ßá‡¶°‡¶´‡ßã‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</div>
                <a href="listening-lab.html" class="btn-primary" style="display: block; text-align: center; margin-top: 15px;">‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</a>
            </div>
            <div class="resource-card reveal" id="module-reading">
                <div class="icon" style="font-size: 40px;">üìñ</div>
                <div class="res-tag">‡¶ß‡¶æ‡¶™ ‡ß¶‡ß®</div>
                <h3>Reading Lab</h3>
                <p>‡¶™‡ßç‡¶Ø‡¶æ‡¶∏‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶∏‡•§</p>
                <div class="bangla-instruction" style="background: #fef2f2; color: #991b1b;">üí° <strong>‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶®‡¶æ:</strong> ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡ß¨‡ß¶ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡•§</div>
                <a href="reading-lab.html" class="btn-primary" style="display: block; text-align: center; margin-top: 15px;">‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</a>
            </div>
            <div class="resource-card reveal" id="module-writing">
                <div class="icon" style="font-size: 40px;">‚úçÔ∏è</div>
                <div class="res-tag">‡¶ß‡¶æ‡¶™ ‡ß¶‡ß©</div>
                <h3>Writing Lab</h3>
                <p>‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶è‡¶°‡¶ø‡¶ü‡¶∞‡ßá ‡¶è‡¶∏‡ßá (Essay) ‡¶≤‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶∏‡•§</p>
                <div class="bangla-instruction" style="background: #fff7ed; color: #9a3412;">üí° <strong>‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶®‡¶æ:</strong> ‡¶Ö‡¶®‡ßç‡¶§‡¶§ ‡ß®‡ß´‡ß¶ ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§</div>
                <a href="writting-lab.html" class="btn-primary" style="display: block; text-align: center; margin-top: 15px;">‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</a>
            </div>
            <div class="resource-card reveal" id="module-speaking">
                <div class="icon" style="font-size: 40px;">üó£Ô∏è</div>
                <div class="res-tag">‡¶ß‡¶æ‡¶™ ‡ß¶‡ß™</div>
                <h3>Speaking Lab</h3>
                <p>‡¶ï‡¶ø‡¶â-‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡ßá‡¶ñ‡ßá ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡¶æ ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
                <div class="bangla-instruction" style="background: #f0fdf4; color: #166534;">üí° <strong>‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶®‡¶æ:</strong> ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ö‡ßá‡¶™‡ßá ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡ßÅ‡¶®‡•§</div>
                <a href="speaking-lab.html" class="btn-primary" style="display: block; text-align: center; margin-top: 15px;">‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</a>
            </div>
        </div>
    </section>

    <section class="resource-section reveal">
        <div class="calculator-container">
            <h2 style="text-align: center; margin-bottom: 10px;">‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶° ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡¶ì ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶≤‡¶æ‡¶á‡¶ú‡¶æ‡¶∞</h2>
            
            <div class="target-box">
                <label style="font-weight: 700; display: block; margin-bottom: 8px;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶ô‡ßç‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ (Target Band):</label>
                <select id="target-score">
                    <option value="6.0">Band 6.0</option>
                    <option value="6.5">Band 6.5</option>
                    <option value="7.0" selected>Band 7.0</option>
                    <option value="7.5">Band 7.5</option>
                    <option value="8.0">Band 8.0</option>
                    <option value="8.5">Band 8.5</option>
                    <option value="9.0">Band 9.0</option>
                </select>
            </div>
            
            <div class="calc-grid">
                <div class="calc-input-group"><label>üéß Listening</label><input type="number" id="calc-listening" step="0.5" min="0" max="9" placeholder="0.0"></div>
                <div class="calc-input-group"><label>üìñ Reading</label><input type="number" id="calc-reading" step="0.5" min="0" max="9" placeholder="0.0"></div>
                <div class="calc-input-group"><label>‚úçÔ∏è Writing</label><input type="number" id="calc-writing" step="0.5" min="0" max="9" placeholder="0.0"></div>
                <div class="calc-input-group"><label>üó£Ô∏è Speaking</label><input type="number" id="calc-speaking" step="0.5" min="0" max="9" placeholder="0.0"></div>
            </div>

            <button class="btn-primary" onclick="calculateOverallBand()" style="width: 100%; padding: 15px; font-size: 1.1rem; font-weight: 700;">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶≤‡¶æ‡¶á‡¶∏‡¶ø‡¶∏ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>

            <div id="band-result-box">
                <div class="score-comparison">
                    <div class="score-circle">
                        <p style="font-size: 0.8rem; font-weight: 700; color: #64748b;">‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°</p>
                        <h1 id="overall-score" style="font-size: 3rem; color: var(--primary); margin: 0;">0.0</h1>
                    </div>
                    <div style="font-size: 1.5rem; color: #cbd5e1;">‚ûî</div>
                    <div class="score-circle">
                        <p style="font-size: 0.8rem; font-weight: 700; color: #64748b;">‡¶ü‡¶æ‡¶∞‡ßç‡¶ó‡ßá‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°</p>
                        <h1 id="display-target" style="font-size: 3rem; color: var(--secondary); margin: 0;">0.0</h1>
                    </div>
                </div>
                <div id="feedback-bangla" class="bangla-instruction" style="font-size: 1.1rem; text-align: left; padding: 20px;"></div>
                
                <div id="motivation-card" class="motivation-card"></div>
            </div>

            <div id="history-section" class="history-section">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h3 style="margin:0;">‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶™‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶∏ ‡¶≤‡¶ó</h3>
                    <button onclick="clearLogs()" style="background:none; border:none; color:#ef4444; cursor:pointer; font-size: 0.8rem;">‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßÅ‡¶®</button>
                </div>
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                            <th>‡¶∏‡ßç‡¶ï‡ßã‡¶∞</th>
                            <th>‡¶ü‡¶æ‡¶∞‡ßç‡¶ó‡ßá‡¶ü</th>
                            <th>‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ</th>
                        </tr>
                    </thead>
                    <tbody id="history-body"></tbody>
                </table>
            </div>
        </div>
    </section>

    <footer>
        <p>&copy; ‡ß®‡ß¶‡ß®‡ß¨ ‡¶Ü‡¶á‡¶á‡¶è‡¶≤‡¶ü‡¶ø‡¶è‡¶∏ ‡¶ï‡¶Æ‡ßç‡¶™‡¶æ‡¶∏ ‡¶¨‡¶ø‡¶°‡¶ø‡•§</p>
    </footer>

    <script src="script.js"></script>
    <script>
        window.onload = function() {
            renderHistory();
        };

        function calculateOverallBand() {
            const L = parseFloat(document.getElementById('calc-listening').value) || 0;
            const R = parseFloat(document.getElementById('calc-reading').value) || 0;
            const W = parseFloat(document.getElementById('calc-writing').value) || 0;
            const S = parseFloat(document.getElementById('calc-speaking').value) || 0;
            const target = parseFloat(document.getElementById('target-score').value);

            if (!L || !R || !W || !S) {
                alert("‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶ö‡¶æ‡¶∞‡¶ü‡¶ø ‡¶∏‡ßá‡¶ï‡¶∂‡¶®‡ßá‡¶∞ ‡¶∏‡ßç‡¶ï‡ßã‡¶∞‡¶á ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
                return;
            }

            let avg = (L + R + W + S) / 4;
            let mod = avg % 1;
            let finalScore = Math.floor(avg);
            if (mod >= 0.25 && mod < 0.75) finalScore += 0.5;
            else if (mod >= 0.75) finalScore += 1;

            const finalFormatted = finalScore.toFixed(1);
            const resultBox = document.getElementById('band-result-box');
            document.getElementById('overall-score').innerText = finalFormatted;
            document.getElementById('display-target').innerText = target.toFixed(1);
            resultBox.style.display = "block";

            resultBox.classList.remove('vibe-red');
            resultBox.style.borderColor = "var(--primary)";

            let weakParts = [];
            if (L < target) weakParts.push("‡¶≤‡¶ø‡¶∏‡¶®‡¶ø‡¶Ç");
            if (R < target) weakParts.push("‡¶∞‡¶ø‡¶°‡¶ø‡¶Ç");
            if (W < target) weakParts.push("‡¶∞‡¶æ‡¶á‡¶ü‡¶ø‡¶Ç");
            if (S < target) weakParts.push("‡¶∏‡ßç‡¶™‡¶ø‡¶ï‡¶ø‡¶Ç");

            let feedback = "";
            if (finalScore < 6) {
                resultBox.classList.add('vibe-red');
                feedback = `‚ö†Ô∏è <strong>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡ß¨.‡ß¶ ‡¶è‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá!</strong> ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶¨‡ßá‡¶∏‡¶ø‡¶ï ‡¶•‡ßá‡¶ï‡ßá ‡¶Ü‡¶∞‡¶ì ‡¶ï‡¶†‡ßã‡¶∞ ‡¶™‡¶∞‡¶ø‡¶∂‡ßç‡¶∞‡¶Æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶ï‡¶∞‡ßá ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶≠‡ßã‡¶ï‡¶æ‡¶¨‡ßÅ‡¶≤‡¶æ‡¶∞‡¶ø‡¶§‡ßá ‡¶ú‡ßã‡¶∞ ‡¶¶‡¶ø‡¶®‡•§`;
            } else if (finalScore >= target) {
                feedback = `üéâ <strong>‡¶ö‡¶Æ‡ßé‡¶ï‡¶æ‡¶∞!</strong> ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶Ö‡¶∞‡ßç‡¶ú‡¶® ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®‡•§ ‡¶Æ‡¶ï ‡¶ü‡ßá‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶è‡¶á ‡¶ï‡¶®‡¶´‡¶ø‡¶°‡ßá‡¶®‡ßç‡¶∏ ‡¶ß‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®‡•§`;
                resultBox.style.borderColor = "#10b981";
            } else {
                const diff = (target - finalScore).toFixed(1);
                feedback = `üí° <strong>‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ${diff} ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶° ‡¶¶‡ßÇ‡¶∞‡ßá ‡¶Ü‡¶õ‡ßá‡¶®‡•§</strong> ‡¶ï‡¶æ‡¶ô‡ßç‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡¶™‡ßá‡¶§‡ßá ‡¶π‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá <strong>${weakParts.join(", ")}</strong> ‡¶™‡¶æ‡¶∞‡ßç‡¶ü‡ßá ‡¶Ü‡¶∞‡¶ì ‡¶Æ‡¶®‡ßã‡¶Ø‡ßã‡¶ó ‡¶¶‡¶ø‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§`;
                resultBox.style.borderColor = "#f59e0b";
            }
            
            document.getElementById('feedback-bangla').innerHTML = feedback;

            // Trigger Motivation and History
            updateMotivation(finalScore);
            saveToHistory(finalFormatted, target.toFixed(1));

            resultBox.scrollIntoView({ behavior: 'smooth' });
        }

        function updateMotivation(score) {
            const card = document.getElementById('motivation-card');
            card.style.display = "block";
            let msg = "";
            if (score >= 7.5) msg = "üåü <strong>‡¶Ö‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£!</strong> ‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶ñ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏‡¶° ‡¶≤‡ßá‡¶≠‡ßá‡¶≤‡ßá ‡¶Ü‡¶õ‡ßá‡¶®‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶á ‡¶ß‡¶æ‡¶∞‡¶æ‡¶¨‡¶æ‡¶π‡¶ø‡¶ï‡¶§‡¶æ ‡¶¨‡¶ú‡¶æ‡ßü ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®‡•§";
            else if (score >= 6.5) msg = "üí™ <strong>‡¶¶‡¶æ‡¶∞‡ßÅ‡¶£ ‡¶ï‡¶∞‡¶õ‡ßá‡¶®!</strong> ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶´‡¶≤‡¶§‡¶æ‡¶∞ ‡¶ñ‡ßÅ‡¶¨ ‡¶ï‡¶æ‡¶õ‡ßá‡•§ ‡¶õ‡ßã‡¶ü‡¶ñ‡¶æ‡¶ü‡ßã ‡¶≠‡ßÅ‡¶≤‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∂‡ßÅ‡¶ß‡¶∞‡ßá ‡¶®‡¶ø‡¶≤‡ßá‡¶á ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø ‡¶Ö‡¶∞‡ßç‡¶ú‡¶® ‡¶π‡¶¨‡ßá‡•§";
            else if (score >= 6.0) msg = "üöÄ <strong>‡¶≠‡¶æ‡¶≤‡ßã ‡¶â‡¶®‡ßç‡¶®‡¶§‡¶ø ‡¶π‡¶ö‡ßç‡¶õ‡ßá!</strong> ‡¶Ü‡¶∞‡¶ì ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶Æ‡¶ï ‡¶ü‡ßá‡¶∏‡ßç‡¶ü ‡¶¶‡¶ø‡¶®, ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶®‡¶´‡¶ø‡¶°‡ßá‡¶®‡ßç‡¶∏ ‡¶¨‡¶æ‡ßú‡¶¨‡ßá‡•§";
            else msg = "üìö <strong>‡¶π‡¶æ‡¶≤ ‡¶õ‡¶æ‡ßú‡¶¨‡ßá‡¶® ‡¶®‡¶æ!</strong> ‡¶®‡¶ø‡ßü‡¶Æ‡¶ø‡¶§ ‡¶™‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶∏ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶ó‡¶æ‡¶á‡¶°‡¶≤‡¶æ‡¶á‡¶® ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶Ö‡¶®‡ßá‡¶ï ‡¶¶‡ßÇ‡¶∞ ‡¶®‡¶ø‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡•§";
            card.innerHTML = msg;
        }

        function saveToHistory(score, target) {
            let logs = JSON.parse(localStorage.getItem('ielts_logs')) || [];
            const newLog = {
                date: new Date().toLocaleDateString('bn-BD'),
                score: score,
                target: target
            };
            logs.unshift(newLog);
            if(logs.length > 5) logs.pop();
            localStorage.setItem('ielts_logs', JSON.stringify(logs));
            renderHistory();
        }

        function renderHistory() {
            const logs = JSON.parse(localStorage.getItem('ielts_logs')) || [];
            const historyBody = document.getElementById('history-body');
            const historySection = document.getElementById('history-section');
            
            if(logs.length === 0) {
                historySection.style.display = "none";
                return;
            }

            historySection.style.display = "block";
            historyBody.innerHTML = "";
            logs.forEach(log => {
                const score = parseFloat(log.score);
                let statusText = "";
                let statusClass = "";

                // Rank System
                if (score >= 7.5) { statusText = "Excellent"; statusClass = "status-success"; }
                else if (score >= 6.5) { statusText = "Best"; statusClass = "status-success"; }
                else if (score >= 6.0) { statusText = "Good"; statusClass = "status-trying"; }
                else if (score >= 5.0) { statusText = "Not that much good"; statusClass = "status-average"; }
                else { statusText = "Worst"; statusClass = "status-worst"; }
                
                historyBody.innerHTML += `
                    <tr>
                        <td>${log.date}</td>
                        <td style="font-weight:bold; color:var(--primary)">${log.score}</td>
                        <td>${log.target}</td>
                        <td><span class="status-tag ${statusClass}">${statusText}</span></td>
                    </tr>
                `;
            });
        }

        function clearLogs() {
            if(confirm("‡¶∏‡¶¨ ‡¶≤‡¶ó ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")) {
                localStorage.removeItem('ielts_logs');
                renderHistory();
            }
        }
    </script>
</body>
</html>